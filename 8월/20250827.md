### :link: 2025-08-27
- [API 응답 방식의 문제점 분석](#0-api-응답-방식의-문제점-분석)
- [ShopApiResponse 설계](#1-shopapiresponse-설계)
 
&nbsp; 
### 0. API 응답 방식의 문제점 분석

기존 컨트롤러 코드에서 API 응답을 생성하는 방식에 반복적인 부분이 많다는 문제점이 있었다. 모든 컨트롤러 메소드에서 `ResponseEntity`를 반환하기 위해 매번 `HashMap`을 생성하고, `map.put()`으로 데이터를 추가한 뒤, `ResponseMessage` 객체로 감싸는 과정이 중복되고 있었다.

```java
// 이전 코드 예시
@GetMapping("/summary")
public ResponseEntity<ResponseMessage> readShopSummaryByAdminCode(...) {
    List<ShopSummary> shopList = shopService.readShopSummaryByAdminCode(adminCode);
    
    // 1. 매번 HashMap 생성
    Map<String, Object> responseMap = new HashMap<>();
    // 2. 데이터 수동 추가
    responseMap.put("shop-list", shopList);
    // 3. ResponseMessage 객체로 감싸기
    ResponseMessage responseMessage = new ResponseMessage(200, "조회 성공", responseMap);
    
    return ResponseEntity.ok().body(responseMessage);
}
```
 
&emsp; 
&nbsp;
### 1. ShopApiResponse 설계
- CRUD 작업에 맞춰 표준화된 응답 생성 필요
    - → 각각의 작업에 맞는 HTTP 상태 코드(201, 200, 204 등)와 성공 메시지를 내장한 static 메소드(`create`, `read`, `update`, `delete`) 설계

```java
public class ShopApiResponse {

    /**
     * 생성 성공 응답을 생성할 때 사용
     * @return 생성된 ResponseEntity<ResponseMessage> 객체
     */
    public static ResponseEntity<ResponseMessage> create(String dataKey, Object dataValue) {

        Map<String, Object> data = new HashMap<>();
        data.put(dataKey, dataValue);

        ResponseMessage responseMessage = new ResponseMessage(201, "리소스 생성 성공", data);

        return ResponseEntity.ok(responseMessage);
    }

    public static ResponseEntity<ResponseMessage> read(String dataKey, Object dataValue) {

        Map<String, Object> data = new HashMap<>();
        data.put(dataKey, dataValue);

        ResponseMessage responseMessage = new ResponseMessage(200, "조회 성공", data);

        return ResponseEntity.ok(responseMessage);
    }

    public static ResponseEntity<ResponseMessage> update(String dataKey, Object dataValue) {

        Map<String, Object> data = new HashMap<>();
        data.put(dataKey, dataValue);

        ResponseMessage responseMessage = new ResponseMessage(201, "리소스 수정 성공", data);

        return ResponseEntity.ok(responseMessage);
    }

    /**
     * 삭제 성공 응답을 생성할 때 사용
     * @return 생성된 ResponseEntity<ResponseMessage> 객체
     */
    public static ResponseEntity<ResponseMessage> delete() {
        ResponseMessage responseMessage = new ResponseMessage(204, "삭제 성공", null);
        return ResponseEntity.ok(responseMessage);
    }
}
```

https://github.com/BOA-with-elephant/Header-backend/pull/294