### :link: 2025-08-26
- [ì±—ë´‡ ì—°ë™ì„ ìœ„í•œ API ê²Œì´íŠ¸ì›¨ì´ êµ¬í˜„](#1-ì±—ë´‡-ì—°ë™ì„-ìœ„í•œ-api-ê²Œì´íŠ¸ì›¨ì´-êµ¬í˜„) 
- [ë™ì  URL ì„¤ì •](#2-ë™ì -url-ì„¤ì •) 
 
&nbsp; 
### 1. ì±—ë´‡ ì—°ë™ì„ ìœ„í•œ API ê²Œì´íŠ¸ì›¨ì´ êµ¬í˜„
- Spring Boot ì„œë¹„ìŠ¤ ë‚´ë¶€ì— Python ê¸°ë°˜ ì±—ë´‡ ì„œë¹„ìŠ¤ í˜¸ì¶œ ì»¨íŠ¸ë¡¤ëŸ¬ ì¶”ê°€
    - ê¸°ì¡´ì—ëŠ” Python ë‚´ë¶€ì—ì„œ llm ì„œë²„ë¥¼ ì§ì ‘ í˜¸ì¶œ(8000 í¬íŠ¸)í•˜ì˜€ìœ¼ë‚˜, ì´ê²ƒì€ ê¸°ì¡´ì— ì˜ë„í•˜ì˜€ë˜ ì„œë²„ êµ¬í˜„ ê³„íšê³¼ ìƒì´í•˜ì—¬ ìˆ˜ì •í•¨

```java
// UserReservationChatController.java
@PostMapping("/reservation/chat")
public ResponseEntity<ApiResponse<UserReservationResponseDTO>> sendUserReservationMessage(
        @RequestBody @Valid UserReservationRequestDTO request,
        @AuthenticationPrincipal AuthDetails authDetails,
        HttpServletRequest httpServletRequest
){
    // HTTP í—¤ë”ì—ì„œ JWT í† í° ì¶”ì¶œ
    String token = ...; 

    // í† í°ê³¼ ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ChatbotServiceë¡œ ì „ë‹¬
    UserReservationResponseDTO response = chatbotService.sendUserReservationChat(
            token,
            request.getQuery()
    );
    return ResponseEntity.ok(ApiResponse.success(response));
}
```

&emsp; 
&nbsp;
### 2. ë™ì  URL ì„¤ì •
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í™˜ê²½ ê°ì§€ â†’ "http://llm:8000" ë˜ëŠ” "http://localhost:8080" ë°˜í™˜

```python
# llm/app/services/user_reservation_service.py

def detect_url():
    """ Docker / local í™˜ê²½ ê°ì§€ -> url ë°˜í™˜ í•¨ìˆ˜ """
    if "HOSTNAME" in os.environ:
        logging.info("ğŸ³ ë„ì»¤ í™˜ê²½ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. [llm:8000]")
        return "http://llm:8000"
    else:
        logging.info("ğŸ’» ë¡œì»¬ í™˜ê²½ìœ¼ë¡œ ì¶”ì •ë©ë‹ˆë‹¤. [localhost:8080]")
        return "http://localhost:8080"

BASE_API_URL = detect_url()
```

https://github.com/BOA-with-elephant/Header-backend/pull/255