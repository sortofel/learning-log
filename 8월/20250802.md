### :link: 2025-08-02
- [Docker](#docker)
 
&nbsp;
### Docker
#### 1) 서버 확장 개념

| 용어        | 설명 |
|-------------|------|
| **스케일업** | 접속량 증가 시, 서버의 **사양(CPU, RAM 등)**을 키워 처리 성능 향상 |
| **스케일다운** | 반대로, 트래픽이 줄어들면 서버 자원을 줄여 비용 최적화 |

#### 2) 도커 명령어

```bash
# hello-world 이미지를 가져오기
docker pull hello-world

# 현재 보유 중인 이미지 목록 확인
docker images

# 실행 중인 컨테이너 목록 확인
docker ps

# hello-world 컨테이너 실행
docker run hello-world

# 과거에 실행된 컨테이너 포함 전체 확인
docker ps -a

# 컨테이너 삭제
docker rm [컨테이너 ID or 이름]
```

#### 3) Git 관련

```bash
# git 캐시 제거 (비권장 방식)
git rm -r --cached .
```
#### 4) 포트 바인딩

* 형식: `외부포트:내부포트`

  * 예: `-p 8080:8080`
  * 외부 사용자가 접근할 포트: 내부 컨테이너 앱이 사용하는 포트

#### 5) Spring Boot 배포 방식

* `Tomcat`이 **내장되지 않은 경우** → `.war` 파일로 패키징
* 일반적으로는 `bootJar` → `.jar` 생성됨

  * 위치: `build/libs/`
* 실행 명령어:

```bash
java -jar [파일이름].jar
```

#### 6) Dockerfile 작성

프로젝트 최상단에 확장자 없는 `Dockerfile` 생성:

```Dockerfile
FROM eclipse-temurin:17-jdk  
ARG JAR_FILE=build/libs/*.jar  
COPY ${JAR_FILE} app.jar  
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

#### 7) 이미지 생성 및 실행

```bash
# 도커 이미지 생성
docker build -t sortofel/[이름] .

# 도커 이미지 실행 (백그라운드)
docker run -p 8080:8080 -d sortofel/[이름]
```

#### 8) 배포 단계 요약

1. \*\*개발 서버(로컬)\*\*에서 `build` 실행

   * Spring: `xxx.jar` 생성
   * Next.js: `.next` 디렉토리 생성
2. 생성된 빌드 결과물을 기반으로 도커 이미지 생성
3. 원격 서버(예: EC2)에 접속
4. 도커 이미지 다운로드
5. 실행 (서비스 배포 완료)

#### 9) CI/CD 기본 개념

| 용어                                      | 설명                          |
| --------------------------------------- | --------------------------- |
| **CI (Continuous Integration)**         | 실시간으로 소스코드를 통합 (빌드/테스트 자동화) |
| **CD (Continuous Delivery/Deployment)** | 자동으로 배포까지 이어지는 파이프라인 구성     |
